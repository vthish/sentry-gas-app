
import { NOOP_METER_PROVIDER } from '../metrics/NoopMeterProvider';
import { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';
import { DiagAPI } from './diag';
const API_NAME = 'metrics';

export class MetricsAPI {
    
    constructor() { }
    
    static getInstance() {
        if (!this._instance) {
            this._instance = new MetricsAPI();
        }
        return this._instance;
    }
    
    setGlobalMeterProvider(provider) {
        return registerGlobal(API_NAME, provider, DiagAPI.instance());
    }
    
    getMeterProvider() {
        return getGlobal(API_NAME) || NOOP_METER_PROVIDER;
    }
    
    getMeter(name, version, options) {
        return this.getMeterProvider().getMeter(name, version, options);
    }
    
    disable() {
        unregisterGlobal(API_NAME, DiagAPI.instance());
    }
}

