const require_rolldown_runtime = require('../_virtual/rolldown_runtime.js');
const require_common_config = require('./config.js');
let firebase_admin_app = require("firebase-admin/app");
firebase_admin_app = require_rolldown_runtime.__toESM(firebase_admin_app);


const APP_NAME = "__FIREBASE_FUNCTIONS_SDK__";
let cache;
function getApp() {
	if (typeof cache === "undefined") {
		try {
			cache = (0, firebase_admin_app.getApp)();
		} catch {
			cache = (0, firebase_admin_app.initializeApp)({
				...require_common_config.firebaseConfig(),
				credential: (0, firebase_admin_app.applicationDefault)()
			}, APP_NAME);
		}
	}
	return cache;
}

function setApp(app) {
	if (cache?.name === APP_NAME) {
		void (0, firebase_admin_app.deleteApp)(cache);
	}
	cache = app;
}


exports.getApp = getApp;
exports.setApp = setApp;
